with this exmaple i never get a problem , expline why ? :


class ProjectFlowNoteAttachment(models.Model):
    project_flow_note = models.ForeignKey(ProjectFlowNote, related_name='ProjectFlowNoteAttachment_project_flow_note_related_ProjectFlowNote', on_delete=models.CASCADE, blank=True, null=True)
    file = models.FileField(upload_to='project_flow/ProjectFlowNoteAttachment/', validators=[validate_file_or_image])
    file_name = models.CharField(max_length=255, editable=False, null=True, blank=True)
    created_data = models.DateTimeField(auto_now_add=True) 
    def save(self, *args, **kwargs):
        if self.file :
            self.file_name = basename(self.file.name)
        super().save(*args, **kwargs)

    def __str__(self):
        return f"{self.id}, {self.project_flow_note}" 

 


 and here is part of my view 
    elif 'ProjectFlowNoteAttachment' in request.path:
        file_obj = get_object_or_404(ProjectFlowNoteAttachment, file__icontains=file_name)
        try:
            project_flow_obj = file_obj.project_flow_note.project_flow
        except :
            project_flow_obj = None                     
        file_path = file_obj.file.path





if i use file_name=file_name , i get many errror and see and note the file note is same for multble emages . 





